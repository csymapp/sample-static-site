!function(t,e){"use strict";var o;t(document).ready((function(){t(".content").length&&(e.initHighlightingOnLoad(),t(".content table").addClass("table"),fitvids(".content")),t(".home-categories").length&&t(".home-categories").masonry({columnWidth:".col",itemSelector:".col",transitionDuration:0}),t(".goto-edit").click((function(){window.location.href=window.location.href+"/edit"})),t("#add-page-confirm").click((function(){t("#addModal").modal("hide");var e=t("#page-name").val().replace(/\s+/g,"-");t.post("/rn-add-page",{name:e,category:o},(function(t){switch(t.status){case 0:var i=[""];""!==o&&i.push(o),i.push(e),i.push("edit"),window.location=i.join("/")}})).fail((function(t){403===t.status&&(window.location="/login")}))})),t("#delete-page-confirm").click((function(){t("#deleteModal").modal("hide"),t.post("/rn-delete",{file:decodeURI(window.location.pathname)},(function(t){switch(t.status){case 0:window.location="/"}})).fail((function(t){403===t.status&&(window.location="/login")}))})),t(".add-page").click((function(){var e=t(this).closest("h5").clone().children().remove().end().text().trim().toLowerCase().replace(/\s+/g,"-");o="main-articles"!==e?e:""})),t("#newCategory").keypress((function(e){13===e.which&&t.post("/rn-add-category",{category:t(this).val().trim().toLowerCase().replace(/\s+/g,"-")},(function(t){location.reload()})).fail((function(t){403===t.status&&(window.location="/login")}))})),t(".close-edit").click((function(){var t=window.location.href.split("/");t.pop(),window.location=t.join("/")})),t.getJSON("/translations/"+t("html").prop("lang")+".json",null,(function(e){t(".save-page").click((function(){var o=window.location.pathname.split("/");o.pop(),t("#entry-markdown").next(".CodeMirror")[0].CodeMirror.save(),t.post("/rn-edit",{file:decodeURI(o.join("/")),content:t("#entry-markdown").val(),meta_title:t("#entry-metainfo-title").val(),meta_description:t("#entry-metainfo-description").val(),meta_sort:t("#entry-metainfo-sort").val()},(function(o){switch(o.status){case 0:t("#edit-status").slideUp((function(){t("#edit-status").text(e.edit.pageSaved),t("#edit-status").removeClass(),t("#edit-status").addClass("alert alert-success"),t("#edit-status").slideDown()}));break;case 1:t("#edit-status").slideUp((function(){t("#edit-status").text(e.edit.pageSaveError),t("#edit-status").removeClass(),t("#edit-status").addClass("alert alert-warning"),t("#edit-status").slideDown()}))}})).fail((function(t){403===t.status&&(window.location="/login")}))}))}))}))}(jQuery,hljs);